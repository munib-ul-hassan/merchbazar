<% layout('layouts/adminLayout') -%>
<%-block('title','<title> Add Category </title>')%>


<div class="container bg-white py-3" style="max-width: 90%;">
  <!-- <div class="">
                <a href="#" class="btn btn-icon btn-primary fs-5" data-bs-toggle="modal" data-bs-target="#kt_modal_1">
                    +
                </a>
            </div> -->
  <div class="table-responsive ">
    <table id="kt_datatable_zero_configuration" class="table table-row-bordered gy-5">
      <thead>
        <tr class="fw-semibold fs-6 text-muted">
          <th>ID</th>
          <th>Category Name</th>
          <th>Category Slug</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>

        <% categories.map((item,index)=>{ %>

        <tr>
          <td><%- index+1 -%></td>
          <td><%- item.categoryName -%></td>
          <td class="ps-5"><%- item.slug -%></td>
          <td>
            <div class="d-flex align-items-start justify-content-start gap-2">
              <form action="/api/delete-category/<%- item._id %>" method="post">
                <button type="submit" class="btn btn-icon btn-primary" onclick="return confirm('Are you sure you want to delete this category?')">
                  <i class="bi bi-archive fs-4 me-2"></i>
                </button>
              </form>

              <a type="button" class="btn btn-icon btn-secondary" data-bs-toggle="modal" data-bs-target="#exampleModal">
                <i class="bi bi-pencil fs-4 me-2"></i>
              </a>
            </div>
          </td>
        </tr>


        <% }) %>

      </tbody>
    </table>
  </div>

</div>
<div class="modal fade" tabindex="-1" id="kt_modal_1">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title">Add Category</h3>

        <!--begin::Close-->
        <div class="btn btn-icon btn-sm btn-active-light-primary ms-2" data-bs-dismiss="modal" aria-label="Close">
          <i class="ki-duotone ki-cross fs-1"><span class="path1"></span><span class="path2"></span></i>
        </div>
        <!--end::Close-->
      </div>

      <div class="modal-body">
        <div class="row">
          <div class="col-lg-12">
            <input type="text" class="form-control form-control-solid" placeholder="Enter Category Name" />
          </div>
          <div class="col-lg-12 mt-3">
            <input type="text" class="form-control form-control-solid" placeholder="Enter Category Slug" />
          </div>
          <div class="col-lg-12 mt-3">
            <a href="#" class="btn btn-primary">Submit</a>

          </div>
        </div>
      </div>

    </div>
  </div>
</div>



<!-- Category Update Model  -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="exampleModalLabel">Update Category</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-lg-12">
            <div class="mb-3">
              <label for="categoryName" class="form-label">Category Name</label>
              <input type="text" class="form-control form-control-solid" name="categoryName" id="categoryName" placeholder="name@example.com">
              <div  class="form-text d-none" id="categoryNameError">Please Update Your Category Name</div>
            </div>
          </div>
          <div class="col-lg-12">
            <div class="mb-3">
              <label for="categoryImage" class="form-label">Category Image</label>
              <input type="file" class="form-control form-control-solid" name="categoryImage" id="categoryImage" placeholder="name@example.com">
              <div  class="form-text d-none" id="categoryImageError">Please Update Your Image</div>

            </div>
          </div>
          <div class="col-lg-12 mt-3">
            <button class="btn btn-primary">Add New Category</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- Category Update Model  -->


<script>
  $("#kt_datatable_zero_configuration").DataTable();
</script>